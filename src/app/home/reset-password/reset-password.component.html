<ng-container *ngIf="!passwordChanged">

    <form fxFlex
          fxLayout="column"
          fxLayoutAlign="center center"
          [formGroup]="form"
          (submit)="onSubmit($event)"
          *ngIf="form">

        <mat-card>
            <mat-card-header>
                <mat-card-title>
                    Please enter a new password
                </mat-card-title>
            </mat-card-header>

            <mat-card-content fxLayout="column"
                              fxLayoutGap="24px">

                <mat-form-field>
                    <mat-label>New Password</mat-label>
                    <input matInput
                           formControlName="password"
                           type="password" />

                    <mat-error *ngIf="form.controls.password.errors?.required">
                        This field is required
                    </mat-error>

                    <mat-error *ngIf="form.controls.password.errors?.minlength">
                        Minimum length is {{form.controls.password.errors?.minlength.requiredLength}} characters
                    </mat-error>
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Confirm Password</mat-label>
                    <input matInput
                           formControlName="confirm"
                           type="password" />

                    <mat-error *ngIf="form.controls.confirm.errors?.required">
                        This field is required
                    </mat-error>

                    <mat-error *ngIf="form.controls.confirm.errors?.invalidPasswordMatch">
                        Passwords do not match
                    </mat-error>

                    <mat-error *ngIf="form.controls.confirm.errors?.minlength">
                        Minimum length is {{form.controls.confirm.errors?.minlength.requiredLength}} characters
                    </mat-error>
                </mat-form-field>

                <div fxLayout="row"
                     fxLayoutGap="15px">
                    <button mat-raised-button
                            color="primary"
                            type="submit">Submit</button>
                    <a mat-button
                       color="primary"
                       type="button"
                       [routerLink]="['/login']">Cancel</a>
                </div>
            </mat-card-content>
        </mat-card>
    </form>
</ng-container>
<ng-container *ngIf="passwordChanged">
    <div fxLayout="column"
         fxLayoutAlign="center center">

        <div fxLayout="column"
             fxLayoutGap="24px">
            <h1>Success</h1>
            <p>
                Your password has been successfully changed. You can now log in.
            </p>
            <div>
                <button mat-stroked-button
                        color="primary"
                        type="button"
                        [routerLink]="['/login']">
                    Return to Login
                </button>
            </div>
        </div>
    </div>
</ng-container>
